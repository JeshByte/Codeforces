So, my first observation was that if the string is of odd length, there will always be atleast one hanging bracket which can't be paired with anyone and can't be colored. So in that case the answer is -1. Now lets take the case of even length strings. Here 2 things can happen - the string is beautiful or not. If it is then the answer will be 1. We can check if it is beautiful in linear time using a stack. Now coming to the case when the string is not beautiful. My hypothesis is that in this case the answer will always be 2 or -1. This is because even if the entire string is not beautiful, there will be some subset of it that is. We will extract the largest such subset using the above mentioned stack logic. Then the remaining string will either be a beautiful string or a non-beautiful string that doesn't have any beautiful subset in it. This is because if it was not entirely beautiful but still had a beautiful subset in it, that subset would have been included in my original subset that I first extracted as per my logic. So the remaining string has to fall under either of those 2 categories. If the remaining string is beautiful, then the answer is 2 and we will color these 2 subsets in 2 colors. And if it is not beautiful, then the answer will be -1 as this remaining string can't be colored.
