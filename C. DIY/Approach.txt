If we look at the coordinates of any rectangle, they consist of 4 pairs of identical numbers. Now these pairs might be equal to each other but whats necessary is that they are equal to the number they are paired up with. So if there aren't 4 such pairs then the answer is not possible(not even a degenerate one). Now, if there are at least 4 such pairs, we can compress the og array such that if an element was present n times in the og array then in the new array it would be present floor(n/2) times. We are doing this because when we will choose an element we are choosing a pair of that element. So by dividing their occurences by 2 we are making each element represent two of them. This will also allow us to treat equal numbers as seperate making the implementation easier. Now we will sort the new array and take the first 2 elements - a1,a2 and the last 2 elements an-1,an. With these points we will make a rectangle of area (an-1-a1)*(an-a2). This would always be optimal which is easy to prove.
