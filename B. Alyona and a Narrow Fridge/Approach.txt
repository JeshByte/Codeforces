So as on each shelf only 2 bottles can be kept, for k bottles there would be ceil(k/2) shelves. Now the only way the k bottles can be kept is if the sum of the heights of the largest bottle in each shelf is <= the total height. So for k bottles it would be optimal to go in decreasing order and pair up the 2 largest bottles at a time. So to check for a given set of bottles, we need to first sort them in descending order and then add up the alternate heights(starting from the tallest one). If this sum is within the total height, then this is valid. As the constraints allow a n^2 solution we can check for all the prefixes. We will use a max heap to keep the prefixes in a sorted order.  
